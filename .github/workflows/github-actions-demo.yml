name: GitHub Actions Demo
run-name: ${{ github.actor }} teste les GitHub Actions ! Qu'il est fort ğŸ’ª
on: [push]
jobs:
  Explore-GitHub-Actions:
    runs-on: ubuntu-latest
    steps:
      - run: echo "ğŸ‰ The job was automatically triggered by a ${{ github.event_name }} event."
      - run: echo "ğŸ§ This job is now running on a ${{ runner.os }} server hosted by GitHub!"
      - run: echo "ğŸ” The name of your branch is ${{ github.ref }} and your repository is ${{ github.repository }}."
      - name: Check out repository code
        uses: actions/checkout@v5
      - run: echo "ğŸ’¡ The ${{ github.repository }} repository has been cloned to the runner."
      - run: echo "ğŸ–¥ï¸ The workflow is now ready to test your code on the runner."
      - name: Update composer dependencies
        run: composer update
      - name: Install composer dependencies
        run: composer install
      - name: Up docker containers
        run: docker compose up -d
      - name: Delete database (if exists) for tests
        run: symfony console doctrine:database:drop --force --if-exists --env=test
      - name: Create database for tests
        run: symfony console doctrine:database:create --env=test
      - name: Executer migrations for tests
        run: symfony console doctrine:migrations:migrate -n --env=test
      - name: Load fixtures for tests
        run: symfony console doctrine:fixtures:load -n --env=test
      - name: Build sass assets
        run: symfony console sass:build
      - name: Phpunit tests
        run: vendor/bin/phpunit
      - run: echo "ğŸ This job's status is ${{ job.status }}."
